# This job retrieves the latest runner version
# and writes it into a file
retrieve_recommended_runner_version:
  stage: download_dependencies
  image: dadebia/codebox-release-cli:latest
  tags:
    - docker-linux
  script:
    - ./scripts/retrieve-latest-runner-version.sh
    - echo "CODEBOX_RUNNER_VERSION=$(cat recommended_runner_version.txt)" > recommended_runner_version.env
  artifacts:
    reports:
      dotenv: recommended_runner_version.env
    expire_in: 1 hour
  when: on_success
  rules:
    - if: $CI_COMMIT_TAG
